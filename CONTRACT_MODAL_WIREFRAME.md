# Contract Modal Wireframe - Phase 1

## Modal Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Add/Edit Contract                                                      [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  CONTRACT DETAILS                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Project *          [Dropdown: Select Project         â–¼]          â”‚      â”‚
â”‚  â”‚ Subcontractor *    [Dropdown: Select Contractor      â–¼]          â”‚      â”‚
â”‚  â”‚ Contract Amount *  [$____________]                                â”‚      â”‚
â”‚  â”‚ Contract Nickname* [____________________________]                 â”‚      â”‚
â”‚  â”‚ Start Date        [____/____/____]                               â”‚      â”‚
â”‚  â”‚ End Date          [____/____/____]                               â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                              â”‚
â”‚  LINE ITEMS                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ âš  Contract Locked: Line items cannot be edited after first paymentâ”‚      â”‚
â”‚  â”‚   application has been submitted.                                 â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                              â”‚
â”‚  [+ Add Row]  [ðŸ—‘ Delete Selected]  [â†© Undo (Ctrl+Z)]  [ðŸ“¥ Import CSV]     â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â”‚â˜â”‚#â”‚ Description of Work    â”‚ Scheduled Value â”‚ Actions â”‚            â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â”‚â˜â”‚1â”‚ [Click to edit______] â”‚ [$__________]   â”‚ [â‹®]     â”‚            â”‚ â”‚
â”‚  â”‚ â”‚â˜â”‚2â”‚ [Click to edit______] â”‚ [$__________]   â”‚ [â‹®]     â”‚            â”‚ â”‚
â”‚  â”‚ â”‚â˜â”‚3â”‚ [Click to edit______] â”‚ [$__________]   â”‚ [â‹®]     â”‚            â”‚ â”‚
â”‚  â”‚ â”‚â˜â”‚4â”‚ [Click to edit______] â”‚ [$__________]   â”‚ [â‹®]     â”‚            â”‚ â”‚
â”‚  â”‚ â”‚â˜â”‚5â”‚ [Click to edit______] â”‚ [$__________]   â”‚ [â‹®]     â”‚            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚  âš  Line items must have both description and value                          â”‚
â”‚  âœ“ Total Scheduled Value: $125,000.00                                       â”‚
â”‚                                                                              â”‚
â”‚  [Cancel]                                              [Save Contract]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Breakdown

### 1. Modal Container
- **Width**: Max 4xl (896px)
- **Height**: Max 90vh with scroll
- **Background**: White with shadow-2xl
- **Border Radius**: Rounded-xl

### 2. Header
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ“„ Add Contract               [X]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- Icon: FilePlus (blue)
- Title: Dynamic ("Add Contract" / "Edit Contract")
- Close button: X icon, hover effect

### 3. Contract Details Section
Form fields in 2-column grid on desktop, stacked on mobile:

| Field | Type | Validation |
|-------|------|------------|
| Project | Dropdown | Required |
| Subcontractor | Dropdown | Required |
| Contract Amount | Number input | Required, >0 |
| Contract Nickname | Text input | Required |
| Start Date | Date picker | Optional |
| End Date | Date picker | Optional |

### 4. Line Items Section

#### 4.1 Locked State Banner (if applicable)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš  Contract Locked: Cannot edit after first payment â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- **Condition**: Shows when contract has non-draft payment applications
- **Style**: Yellow background, warning icon
- **Behavior**: All line items become read-only

#### 4.2 Action Bar
```
[+ Add Row]  [ðŸ—‘ Delete Selected (3)]  [â†© Undo]  [ðŸ“¥ Import CSV (Soon)]
```

| Button | Shortcut | State | Action |
|--------|----------|-------|--------|
| Add Row | - | Always enabled | Adds new empty row at bottom |
| Delete Selected | Del | Enabled when rows selected | Deletes checked rows |
| Undo | Ctrl+Z / Cmd+Z | Enabled when canUndo | Reverts last change |
| Import CSV | - | Disabled (Phase 2) | Shows "Coming Soon" tooltip |

#### 4.3 Editable Table
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚â˜â”‚ # â”‚ Description       â”‚ Value      â”‚ ... â”‚ Actions  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚â˜‘â”‚ 1 â”‚ Foundation Work   â”‚ $25,000.00 â”‚ ... â”‚ [â‹®]      â”‚
â”‚ â”‚â˜â”‚ 2 â”‚ Framing           â”‚ $45,000.00 â”‚ ... â”‚ [â‹®]      â”‚
â”‚ â”‚â˜â”‚ 3 â”‚ [Empty]           â”‚ $0.00      â”‚ ... â”‚ [â‹®]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Columns:**
1. **Checkbox** (40px) - Multi-select for deletion
2. **Item #** (60px) - Auto-numbered, read-only, drag handle
3. **Description** (Flex 1, min 200px) - Inline editable
4. **Scheduled Value** (150px) - Currency input, right-aligned
5. **Actions** (40px) - Kebab menu (â‹®)

**Features:**
- âœ… Click cell to edit (Excel-like)
- âœ… Enter to move down, Tab to move right
- âœ… Escape to cancel edit
- âœ… Drag rows to reorder (drag handle on # column)
- âœ… Auto-renumbers after reorder/delete
- âœ… Highlights empty/invalid rows in red
- âœ… Currency formatting on blur

### 5. Validation Section
```
âš  2 line items have missing values
âœ“ Total Scheduled Value: $125,000.00
âŒ Total must match Contract Amount ($150,000.00)
```

**Validation Rules:**
- Line items must have BOTH description AND value
- Total scheduled value must equal contract amount
- Empty rows are allowed but flagged
- Blocks save if validation fails

### 6. Footer Actions
```
[Cancel]                    [Save Contract]
```
- **Cancel**: Gray button, left-aligned
- **Save**: Blue button, right-aligned, disabled during save
- **Loading state**: Shows spinner and "Saving..."

## User Flows

### Flow 1: Create New Contract (Happy Path)
1. User clicks "+ Add Contract" button
2. Modal opens with 5 empty line item rows
3. User fills contract details (all required fields)
4. User clicks first Description cell â†’ types "Foundation Work"
5. User presses Tab â†’ moves to Value cell â†’ types "25000"
6. User presses Enter â†’ moves to next row
7. User fills 2-3 more line items
8. Total updates in real-time (green checkmark)
9. User clicks "Save Contract"
10. Modal closes, success notification shows

### Flow 2: Add Line Items with Validation
1. Modal open with contract details filled
2. User fills line item: "Framing" / "$45000"
3. User adds another: "" / "$5000" (empty description)
4. Validation shows: "âš  1 line item has missing values"
5. Empty row highlighted in red
6. Save button remains enabled (can fix later)
7. User fills missing description
8. Validation clears, line item normal color
9. Save succeeds

### Flow 3: Reorder Line Items (Drag & Drop)
1. User has 5 line items filled
2. User hovers over Item #3 â†’ cursor changes to move
3. User drags Item #3 to position 1
4. Items auto-renumber: 3â†’1, 1â†’2, 2â†’3
5. Undo button activates
6. User can press Ctrl+Z to revert

### Flow 4: Delete Multiple Line Items
1. User checks 3 line items (rows 2, 4, 6)
2. Delete button shows "Delete Selected (3)"
3. User clicks Delete
4. 3 rows removed
5. Remaining items renumber automatically
6. Undo button activates

### Flow 5: Edit Locked Contract
1. User clicks Edit on contract with payment apps
2. Modal opens with yellow "Contract Locked" banner
3. Contract details are editable
4. Line items table is read-only (grayed out)
5. Add/Delete/Undo buttons disabled
6. User can only update contract details
7. Save updates contract only, not line items

## Keyboard Navigation

| Key | Context | Action |
|-----|---------|--------|
| Tab | Cell editing | Move to next cell (right) |
| Shift+Tab | Cell editing | Move to previous cell (left) |
| Enter | Cell editing | Save and move down |
| Escape | Cell editing | Cancel edit, revert changes |
| Ctrl+Z / Cmd+Z | Anywhere | Undo last line item change |
| Delete | Rows selected | Delete selected rows |
| Arrow keys | Cell editing | Normal text navigation |

## Visual States

### Line Item Row States

**Normal Row:**
```
â”‚â˜â”‚ 2 â”‚ Framing Work      â”‚ $45,000.00 â”‚
```
- White background
- Black text
- Blue highlight on hover

**Selected Row:**
```
â”‚â˜‘â”‚ 2 â”‚ Framing Work      â”‚ $45,000.00 â”‚
```
- Light blue background (#EBF5FF)
- Checkbox checked

**Editing Cell:**
```
â”‚â˜â”‚ 2 â”‚ [Framing Work_]   â”‚ $45,000.00 â”‚
```
- Blue border around cell
- Cursor visible
- White background

**Invalid Row (Missing Data):**
```
â”‚â˜â”‚ 3 â”‚ Foundation Work   â”‚            â”‚
```
- Light red background (#FEE2E2)
- Red border on empty required cell

**Empty Row:**
```
â”‚â˜â”‚ 5 â”‚                   â”‚            â”‚
```
- White background
- Placeholder text: "Click to add description..."
- Gray text color

## Responsive Design

### Desktop (>1024px)
- Modal: 896px wide
- 2-column form layout
- Full table visible
- All columns shown

### Tablet (768px - 1024px)
- Modal: 90% width
- 2-column form layout
- Table scrolls horizontally
- All columns shown

### Mobile (<768px)
- Modal: Full screen
- 1-column form layout
- Table scrolls horizontally
- Simplified columns (hide extras)
- Larger touch targets (48px min)

## Color Palette

| Element | Color | Hex |
|---------|-------|-----|
| Primary Blue | Save button, links | #3B82F6 |
| Success Green | Validation checkmark | #10B981 |
| Warning Yellow | Locked banner | #F59E0B |
| Error Red | Validation errors | #EF4444 |
| Gray 50 | Background | #F9FAFB |
| Gray 700 | Text | #374151 |
| Gray 300 | Borders | #D1D5DB |

## Accessibility

- âœ… ARIA labels on all interactive elements
- âœ… Keyboard navigation fully supported
- âœ… Focus indicators visible
- âœ… Color contrast meets WCAG AA
- âœ… Screen reader friendly
- âœ… Error messages announced
- âœ… Loading states announced

## Performance Targets

- Initial render: <100ms
- Cell edit response: <50ms
- Drag & drop: 60fps
- Save operation: <2s
- Undo operation: Instant

## Future Enhancements (Phase 2)

- ðŸ“¥ CSV Import
- ðŸ“¤ CSV Export
- ðŸ“‹ Copy/Paste from Excel
- ðŸ” Search/Filter line items
- ðŸ“Š Bulk edit selected rows
- ðŸŽ¨ Custom line item categories
- ðŸ“ Notes field per line item

